<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/projects">Projects</a></li>
        <li class="breadcrumb-item">
          <a href="/projects/<%= project.id %>"><%= project.name %></a>
        </li>
        <li class="breadcrumb-item active">Edit Project</li>
      </ol>
    </nav>
    <h2 class="mb-1">
      <i class="fas fa-edit me-2 text-primary"></i>Edit Project
    </h2>
    <p class="text-muted">Update your project details</p>
  </div>
  <div>
    <a href="/projects/<%= project.id %>" class="btn btn-secondary">
      <i class="fas fa-arrow-left me-2"></i>Back to Project
    </a>
  </div>
</div>

<div class="row justify-content-center">
  <div class="col-lg-8">
    <div class="card">
      <div class="card-header">
        <h5 class="card-title mb-0">
          <i class="fas fa-pencil-alt me-2"></i>Edit Project Details
        </h5>
      </div>
      <div class="card-body">
        <form
          action="/projects/<%= project.id %>?_method=PUT"
          method="POST"
          onsubmit="return validateProjectDates()"
        >
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="name" class="form-label">Project Name</label>
              <input
                type="text"
                class="form-control"
                id="name"
                name="name"
                value="<%= project.name %>"
                placeholder="Enter project name"
                required
              />
            </div>
            <div class="col-md-6 mb-3">
              <label for="description" class="form-label">Description</label>
              <input
                type="text"
                class="form-control"
                id="description"
                name="description"
                value="<%= project.description || '' %>"
                placeholder="Project description"
              />
            </div>
          </div>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="startDate" class="form-label">Start Date</label>
              <input
                type="date"
                class="form-control"
                id="startDate"
                name="startDate"
                value="<%= new Date(project.startDate).toISOString().split('T')[0] %>"
                required
              />
            </div>
            <div class="col-md-6 mb-3">
              <label for="endDate" class="form-label">End Date</label>
              <input
                type="date"
                class="form-control"
                id="endDate"
                name="endDate"
                value="<%= new Date(project.endDate).toISOString().split('T')[0] %>"
                required
              />
            </div>
          </div>

          <div class="d-flex justify-content-between align-items-center mt-4">
            <div>
              <a
                href="/projects/<%= project.id %>"
                class="btn btn-outline-secondary"
              >
                <i class="fas fa-times me-2"></i>Cancel
              </a>
            </div>
            <div>
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-save me-2"></i>Update Project
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- Danger Zone -->
    <div class="card border-danger mt-4">
      <div class="card-header bg-danger text-white">
        <h5 class="card-title mb-0">
          <i class="fas fa-exclamation-triangle me-2"></i>Danger Zone
        </h5>
      </div>
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h6 class="text-danger mb-1">Delete Project</h6>
            <p class="text-muted mb-0 small">
              Once you delete a project, there is no going back. All tasks
              associated with this project will also be deleted.
            </p>
          </div>
          <form
            action="/projects/delete/<%= project.id %>?_method=DELETE"
            method="POST"
            onsubmit="return confirm('Are you sure you want to delete this project? This action cannot be undone and will delete all tasks in this project.')"
          >
            <button type="submit" class="btn btn-outline-danger">
              <i class="fas fa-trash me-2"></i>Delete Project
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  function validateProjectDates() {
    const startDate = new Date(document.getElementById("startDate").value);
    const endDate = new Date(document.getElementById("endDate").value);

    if (startDate > endDate) {
      alert("End date must be after start date");
      return false;
    }

    return true;
  }
</script>
